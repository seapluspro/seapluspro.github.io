<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>CppKnife: Functions</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">CppKnife
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Functions </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>There are functions to create variable contents. The functions are grouped by <b>scopes</b>.</p>
<h1><a class="anchor" id="autotoc_md77"></a>
Chapter Overview</h1>
<ul>
<li><a class="el" href="md_doc_searchengine.html">Searchengine</a></li>
<li><a class="el" href="md_doc_basic_statements.html">Basic statements</a></li>
<li><a class="el" href="md_doc_file_statements.html">File and buffer related statements</a></li>
<li><a class="el" href="md_doc_search_statements.html">Search and replace related statements</a></li>
<li><a class="el" href="md_doc_functions.html">Functions</a></li>
</ul>
<h1><a class="anchor" id="autotoc_md78"></a>
Table of Content</h1>
<ul>
<li><a href="#Scope Buffer">Scope Buffer</a><ul>
<li>buffer.difference</li>
<li>buffer.join</li>
<li>buffer.pop</li>
<li>buffer.shift</li>
<li>buffer.sort</li>
<li>buffer.split</li>
</ul>
</li>
<li><a href="#Scope Math">Scope Math</a><ul>
<li>math.random</li>
</ul>
</li>
<li><a href="#Scope Os">Scope Os</a><ul>
<li>os.basename</li>
<li>os.cd</li>
<li>os.changeextension</li>
<li>os.copy</li>
<li>os.dirname</li>
<li>os.exists</li>
<li>os.listfiles</li>
<li>os.pwd</li>
<li>os.popd</li>
<li>os.pushd</li>
<li>os.tempname</li>
</ul>
</li>
<li><a href="#Scope String">Scope String</a><ul>
<li>string.index</li>
<li>string.length</li>
<li>string.piece</li>
<li>string.replace</li>
<li>string.search</li>
<li>string.substring</li>
</ul>
</li>
</ul>
<h1><a class="anchor" id="autotoc_md79"></a>
Scope Buffer</h1>
<p>Offers some functions on buffers.</p>
<h2><a class="anchor" id="autotoc_md80"></a>
buffer.difference</h2>
<p>Returns the line number where two buffers are different. Returns 0 if there is no difference.</p>
<h3><a class="anchor" id="autotoc_md81"></a>
Syntax</h3>
<p>buffer.difference &lt;buffer1&gt; &lt;buffer2&gt;</p>
<h3><a class="anchor" id="autotoc_md82"></a>
Examples</h3>
<p>diff := buffer.difference ~origin ~new if!! diff == 0 log "buffers are equal" else log! "first difference in line $(diff)" fi</p>
<h2><a class="anchor" id="autotoc_md83"></a>
buffer.join</h2>
<p>Puts all lines of a buffer into a result string.</p>
<h3><a class="anchor" id="autotoc_md84"></a>
Syntax</h3>
<p>buffer.join &lt;buffer&gt; [&lt;separator&gt;]</p>
<h3><a class="anchor" id="autotoc_md85"></a>
Examples</h3>
<p>dummy := buffer.split ~list "d,e,f" "," dummy = buffer.sort ~list list = buffer.join ~list ","</p>
<h2><a class="anchor" id="autotoc_md86"></a>
buffer.pop</h2>
<p>Returns the last non empty line as result. Removes that line from the buffer.</p>
<h3><a class="anchor" id="autotoc_md87"></a>
Syntax</h3>
<p>buffer.pop &lt;buffer&gt;</p>
<h3><a class="anchor" id="autotoc_md88"></a>
Examples</h3>
<p>file = buffer.pop ~files current = buffer.pop ~csv</p>
<h2><a class="anchor" id="autotoc_md89"></a>
buffer.shift</h2>
<p>Returns the first non empty line as result. Removes that line from the buffer.</p>
<h3><a class="anchor" id="autotoc_md90"></a>
Syntax</h3>
<p>buffer.shift &lt;buffer&gt;</p>
<h3><a class="anchor" id="autotoc_md91"></a>
Examples</h3>
<p>file = buffer.unshift ~files current = buffer.unshift ~csv </p>
<h2><a class="anchor" id="autotoc_md92"></a>
buffer.sort</h2>
<p>Sorts the buffer contents by lines. Returns the number of lines.</p>
<h3><a class="anchor" id="autotoc_md93"></a>
Syntax</h3>
<p>buffer.sort &lt;buffer&gt;</p>
<h3><a class="anchor" id="autotoc_md94"></a>
Examples</h3>
<p>count = buffer.sort ~files</p>
<h2><a class="anchor" id="autotoc_md95"></a>
buffer.split</h2>
<p>Splits a text into lines and store that in a buffer. Returns the number of created lines.</p>
<h3><a class="anchor" id="autotoc_md96"></a>
Syntax</h3>
<p>buffer.split &lt;buffer&gt; &lt;string&gt; [separator]</p>
<h3><a class="anchor" id="autotoc_md97"></a>
Examples</h3>
<p>count = buffer.split ~names  ","</p>
<h1><a class="anchor" id="autotoc_md98"></a>
Scope Math</h1>
<p>Offers some mathematical functions.</p>
<h2><a class="anchor" id="autotoc_md99"></a>
math.random</h2>
<p>Returns a random number.</p>
<h3><a class="anchor" id="autotoc_md100"></a>
Syntax</h3>
<p>math.random &lt;maximum&gt; [&lt;minimum&gt;]</p>
<h3><a class="anchor" id="autotoc_md101"></a>
Examples</h3>
<p>fileNo = math.random 10 month = math.random 28 1</p>
<h1><a class="anchor" id="autotoc_md102"></a>
Scope Os</h1>
<p>Offers some functions of the operating system: Operates on files/directories...</p>
<h2><a class="anchor" id="autotoc_md103"></a>
os.basename</h2>
<p>Returns the filename of a given file without path.</p>
<h3><a class="anchor" id="autotoc_md104"></a>
Syntax</h3>
<p>os.basename &lt;filename&gt;</p>
<h3><a class="anchor" id="autotoc_md105"></a>
Examples</h3>
<p>node = os.basename </p>
<h2><a class="anchor" id="autotoc_md106"></a>
os.cd</h2>
<p>Returns the current directory and than changes it to a given path. If the path does not exists, an empty string is returned.</p>
<h3><a class="anchor" id="autotoc_md107"></a>
Syntax</h3>
<p>os.cd &lt;path&gt;</p>
<h3><a class="anchor" id="autotoc_md108"></a>
Examples</h3>
<p>node = os.cd "/home"</p>
<h2><a class="anchor" id="autotoc_md109"></a>
os.copy</h2>
<p>Copies a file. Returns 1 on success or 0 on error.</p>
<h3><a class="anchor" id="autotoc_md110"></a>
Syntax</h3>
<p>os.copy &lt;source-name&gt; &lt;target-name&gt; [unique]</p>
<h3><a class="anchor" id="autotoc_md111"></a>
Examples</h3>
<p>rc = os.copy "$(source)" "/tmp/$(source).safe" rc = os.copy "/config/mydata" "/tmp" unique</p>
<h2><a class="anchor" id="autotoc_md112"></a>
os.changeextension</h2>
<p>Sets the file extension of a given filename.</p>
<h3><a class="anchor" id="autotoc_md113"></a>
Syntax</h3>
<p>os.changeextension &lt;filename&gt; &lt;new-extension&gt;</p>
<h3><a class="anchor" id="autotoc_md114"></a>
Examples</h3>
<p>output = os.changeextension  ".out"</p>
<h2><a class="anchor" id="autotoc_md115"></a>
os.dirname</h2>
<p>Returns the path of a given filename.</p>
<h3><a class="anchor" id="autotoc_md116"></a>
Syntax</h3>
<p>os.dirname &lt;filename&gt;</p>
<h3><a class="anchor" id="autotoc_md117"></a>
Examples</h3>
<p>path = os.dirname </p>
<h2><a class="anchor" id="autotoc_md118"></a>
os.exists</h2>
<p>Tests whether a file exists. Returns 1 if the file exists, 0 otherwise.</p>
<h3><a class="anchor" id="autotoc_md119"></a>
Syntax</h3>
<p>os.exists &lt;filename&gt;</p>
<h3><a class="anchor" id="autotoc_md120"></a>
Examples</h3>
<p>exists = os.exists "/home/data"</p>
<h2><a class="anchor" id="autotoc_md121"></a>
os.isdir</h2>
<p>Tests whether a file is a directory. Returns 1 if the file is a directory, 0 otherwise.</p>
<h3><a class="anchor" id="autotoc_md122"></a>
Syntax</h3>
<p>os.isdir &lt;filename&gt;</p>
<h3><a class="anchor" id="autotoc_md123"></a>
Examples</h3>
<p>dummy = os.isdir "/home/data"</p>
<h2><a class="anchor" id="autotoc_md124"></a>
os.listfiles</h2>
<p>Puts the filenames of a given directory into a buffer. Returns the count of files.</p>
<h3><a class="anchor" id="autotoc_md125"></a>
Syntax</h3>
<p>os.listfiles &lt;buffer&gt; &lt;directory&gt; [including &lt;search_expression&gt;] [excluding &lt;search_expression&gt;] [files] [dirs] [links]</p>
<h3><a class="anchor" id="autotoc_md126"></a>
Examples</h3>
<p>countFiles = os.listfiles ~files "/home" including r/.[ch]pp$/ excluding r/test/i files countDirs = os.listfiles ~dirs "/workbench" excluding r/test/i dirs</p>
<h2><a class="anchor" id="autotoc_md127"></a>
os.mkdir</h2>
<p>Creates a directory. Returns 1 on success and 0 on failure. If the director yet exists nothing is done.</p>
<h3><a class="anchor" id="autotoc_md128"></a>
Syntax</h3>
<p>os.mkdir &lt;directory&gt;</p>
<h3><a class="anchor" id="autotoc_md129"></a>
Examples</h3>
<p>success = os.mkdir "/home/jonny/data"</p>
<h2><a class="anchor" id="autotoc_md130"></a>
os.pwd</h2>
<p>Returns the current directory.</p>
<h3><a class="anchor" id="autotoc_md131"></a>
Syntax</h3>
<p>os.pwd </p>
<h3><a class="anchor" id="autotoc_md132"></a>
Examples</h3>
<p>path = os.pwd</p>
<h2><a class="anchor" id="autotoc_md133"></a>
os.popd</h2>
<p>Returns the last entry from the directory stack and change the current directory to that. This is the counterpart of <b>os.pushd</b>.</p>
<h3><a class="anchor" id="autotoc_md134"></a>
Syntax</h3>
<p>os.popd </p>
<h3><a class="anchor" id="autotoc_md135"></a>
Examples</h3>
<p>path = os.popd</p>
<h2><a class="anchor" id="autotoc_md136"></a>
os.pushd</h2>
<p>Puts the current directory onto a directory stack and change the current directory to a given path. This is the counterpart of <b>os.popd</b>.</p>
<h3><a class="anchor" id="autotoc_md137"></a>
Syntax</h3>
<p>os.pushd &lt;path&gt; </p>
<h3><a class="anchor" id="autotoc_md138"></a>
Examples</h3>
<p>path = os.pushd "/src/cpp"</p>
<h2><a class="anchor" id="autotoc_md139"></a>
os.tempname</h2>
<p>Returns a unique temporary filename.</p>
<h3><a class="anchor" id="autotoc_md140"></a>
Syntax</h3>
<p>os.tempfile &lt;name&gt; [&lt;suffix&gt;] [in &lt;sub-directories&gt;]</p>
<ul>
<li>&lt;name&gt;: the returned filename starts with that string.</li>
<li>&lt;suffix&gt;: the returned filename ends with that string. If that suffix is given a unique filename is created.</li>
<li>&amp;ltsub-directories&gt;: specifies a subdirectory in the temporary directory.</li>
</ul>
<h3><a class="anchor" id="autotoc_md141"></a>
Examples</h3>
<p>file = os.tempname "test_data.csv" file = os.tempname "test" ".csv" in "unittest/csv"</p>
<h1><a class="anchor" id="autotoc_md142"></a>
Scope String</h1>
<p>Offers some functions of the operating system: Operates on files/directories...</p>
<h2><a class="anchor" id="autotoc_md143"></a>
string.length</h2>
<p>Replaces length of a string.</p>
<h3><a class="anchor" id="autotoc_md144"></a>
Syntax</h3>
<p>string.index &lt;element&gt; </p><ul>
</ul>
<p>&lt;separator&gt;]</p>
<h3><a class="anchor" id="autotoc_md145"></a>
Parameters:</h3>
<ul>
<li><b>element</b>: that element will be searched.</li>
<li><b>list</b>: a list with items separated by a separator.</li>
<li><b>separator</b>: the separator between the items in the list. Default: " " (blank).</li>
<li><b>returns</b>: -1: not found. Otherwise: the index (0 based) of the element in the list.</li>
</ul>
<h3><a class="anchor" id="autotoc_md146"></a>
Examples</h3>
<p>ix := string.index "2" "1 2 4 8 16" id := string.index "alice" "alice,bob,charly" ","</p>
<h2><a class="anchor" id="autotoc_md147"></a>
string.length</h2>
<p>Replaces length of a string.</p>
<h3><a class="anchor" id="autotoc_md148"></a>
Syntax</h3>
<p>string.length &lt;string&gt;</p>
<h3><a class="anchor" id="autotoc_md149"></a>
Examples</h3>
<p>length = string.length "$(node)"</p>
<h2><a class="anchor" id="autotoc_md150"></a>
string.piece</h2>
<p>Returns an element of a given list given by the index. That list is a string with a given separator: default is the blank " ". If the index is out of range the empty string is returned.</p>
<h3><a class="anchor" id="autotoc_md151"></a>
Syntax</h3>
<p>string.piece &lt;index&gt; </p><ul>
</ul>
<p>&lt;separator&gt;]</p>
<h3><a class="anchor" id="autotoc_md152"></a>
Parameters:</h3>
<ul>
<li><b>index</b>: the string with that index in the list will be returned.</li>
<li><b>list</b>: a string with the items separated by the separator.</li>
<li><b>separator</b>: the separator between the items in the list. Default: " " (blank).</li>
<li><b>returns</b>: the specified item from the list.</li>
</ul>
<h3><a class="anchor" id="autotoc_md153"></a>
Examples</h3>
<p>name = string.piece "$(id)" "alice bob charly" unit = string.piece 3 "nanometer,micrometer,millimeter,meter,kilometer" ","</p>
<h2><a class="anchor" id="autotoc_md154"></a>
string.replace</h2>
<p>Replaces text in another text. Backreferences (syntax $&lt;no&gt;) can be used.</p>
<h3><a class="anchor" id="autotoc_md155"></a>
Syntax</h3>
<p>string.replace &lt;string&gt; &lt;pattern&gt; &lt;replacement&gt; [count=&lt;count&gt;]</p>
<h3><a class="anchor" id="autotoc_md156"></a>
Parameters:</h3>
<ul>
<li><b>string</b>: the string to inspect.</li>
<li><b>pattern</b>: a search expression.</li>
<li><b>replacement</b>: the found pattern will be replaced by that string.</li>
<li><b>count</b>: if given only that count of searches will be done.</li>
<li><b>returns</b>: the modified string.</li>
</ul>
<h3><a class="anchor" id="autotoc_md157"></a>
Examples</h3>
<p>node = string.replace "$(node)" r/^(\w+).cpp/ "~1_test.cpp" name = string.replace '' r/\s*/ ?_? definition = string.replace "$definition" r/\s*=*/ "=" count=1</p>
<h2><a class="anchor" id="autotoc_md158"></a>
string.search</h2>
<p>Search a regular expression in a string. The result is a string. The first part of the string is the whole string matching the pattern. If there are groups (defined by parenteses) that will returned as a list in a string separated by a given separator. If the pattern is not found an empty string is returned.</p>
<h3><a class="anchor" id="autotoc_md159"></a>
Syntax</h3>
<p>string.search &lt;string&gt; &lt;pattern&gt; [&lt;separator&gt;]</p>
<h3><a class="anchor" id="autotoc_md160"></a>
Parameters:</h3>
<ul>
<li><b>string</b>: the string to inspect.</li>
<li><b>pattern</b>: a search expression</li>
<li><b>separator: the separator of the result string between the groups. Default: " "</b></li>
<li><b>__returns</b>: the string with the found groups.</li>
</ul>
<h3><a class="anchor" id="autotoc_md161"></a>
Examples</h3>
<p>hits = string.search "hello.cpp" r/^(\w+)(.?pp)/ ";" if  -ne "hello.cpp;hello;.cpp" stop "error" endif extension = piece "$(hits)" 2 ";"</p>
<h2><a class="anchor" id="autotoc_md162"></a>
string.substring</h2>
<p>Returns a part of a given string</p>
<h3><a class="anchor" id="autotoc_md163"></a>
Syntax</h3>
<p>string.substring &lt;string&gt; &lt;start&gt; [{ count=&lt;count&gt; | including=&lt;end_position&gt; | excluding=&lt;end_position&gt; }]</p>
<h3><a class="anchor" id="autotoc_md164"></a>
Parameters:</h3>
<ul>
<li><b>start</b>: the position of the first character to copy: 1..N</li>
<li><b>count</b>: the maximum count of characters to copy</li>
<li><b>end_position</b>: the last position to copy: including or excluding</li>
<li><b>returns</b>: the substring.</li>
</ul>
<h3><a class="anchor" id="autotoc_md165"></a>
Examples</h3>
<p>name2 = string.substring "$(name)" 3 name2 = string.substring // 3 count=2 name2 = string.substring == 3 including=5 name2 = string.substring '' 3 excluding=9 </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
